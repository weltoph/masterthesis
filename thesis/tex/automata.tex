\chapter{Languages and Automata}
It is well established to rely on finite automata to recognize languages of
infinite objects, e.g. trees or words \cite{LangAutoLog}. In this chapter we
recall some known results for languages of infinite words and infinite trees.
Furthermore, building upon the work in \cite{RandAutoInfTrees}, we introduce and
examine a new class of tree automata, called \aclp*{WDTA}, and, using theses,
present a synthesis result for \aclp*{PBA}.

\section{$\omega$-regular Languages}
Following \cite{LangAutoLog} we introduce word automata with the following
structural definition
\begin{definition}[Word Automaton]
  We define a word automaton as
  $\mathcal{A} = \tuple{Q, \Sigma, q_{0}, \Delta}$ where
  $Q$ is a set of states, $\Sigma$ a finite alphabet, $q_{0}\in Q$ is the
  initial state and $\Delta\subseteq Q\times\Sigma\times Q$ is the transition
  relation. We define some associated notions as follows:
  \begin{description}
    \item [Run]
      For a word $\alpha = \alpha_{0}\alpha{1}\dots\in\Sigma^{\omega}$ we call
      a sequence $\pi = \pi_{0}\pi_{1}\dots \in Q^{\omega}$ a run of
      $\mathcal{A}$ on $\alpha$ if $\pi_{0} = q_{0}$ and for every
      $i\in\mathbb{N}$ holds that
      $\tuple{\pi_{i}, \alpha_{i}, \pi_{i+1}}\in\Delta$
    \item [Determinism]
      We call $\mathcal{A}$ deterministic if for every pair $q\in Q$ and
      $\sigma\in\Sigma$ the set
      $\set{p\in Q\middle| \tuple{q,\sigma,p}\in\Delta}$ has at most one
      element.
  \end{description}
\end{definition}
and expand upon this structure by classifying runs on word automata as
accepting or non-accepting by the following conditions:
\begin{definition}[Acceptance Conditions]
  For a word automaton $\mathcal{A} = \tuple{Q, \Sigma, q_{0}, \Delta}$ we
  define different acceptance conditions. For this we define for a run
  $\pi = \pi_{0}\pi_{1}\dots\in Q^{\omega}$ the operator
  $\Inf$ as the set of states that occur infinitely in a run, i.e.
  \begin{equation*}
    \Inf(\pi) = \set{q\in Q\middle| \text{ there are infinitely many }
    i\in\mathbb{N} \text{ s.t. } \pi_{i} = q}
  \end{equation*}
  With this notion we define the following acceptance conditions:
  \begin{description}
    \item [Büchi] A Büchi condition is defined by a set of final states
      $F\subseteq Q$ and we call a run $\pi$ accepting if
      $\Inf(\pi)\cap F\neq\emptyset$.
    \item [Muller] Muller conditions are given as a family of state sets, i.e.
      $\mathcal{F}\subseteq 2^{F}$. A run $\pi$ is called accepting if
      $\Inf(\pi)\in\mathcal{F}$.
    \item [Rabin] This acceptance condition is represented by a set of pairs\\
      $\Omega = \set{\tuple{E_{0}, F_{0}}, \dots, \tuple{F_{n}, E_{n}}}$ and we
      call a run $\pi$ accepting if there is an $i$ s.t.
      $\Inf(\pi)\cap F_{i}\neq\emptyset$ but $\Inf(\pi)\cap E_{i} = \emptyset$.
    \item [Streett] The Streett condition is dual to the Rabin condition and
      thus also given by a set of pairs
      $\Omega = \set{\tuple{E_{0}, F_{0}}, \dots, \tuple{F_{n}, E_{n}}}$. But
      this time we want that the Rabin condition is not fulfilled, i.e. for a
      run $\pi$ and all $i$ we have either $\Inf(\pi)\cap F_{i} = \emptyset$ or
      $\Inf(\pi)\cap E_{i} \neq \emptyset$.
    \item [Parity] This condition is defined
      by a function
      $\parity:Q\rightarrow \mathbb{N}$. We call a run $\pi$ accepting if the
      maximum of the set $\parity(\Inf(\pi))$, which describes the pointwise
      application of $\parity$ to the set $\Inf(\pi)$, is even (note that due
      to the finiteness of $Q$, $\Inf(\pi)$ is finite as well and thus the
      maximum of $\parity(\Inf(\pi))$ exists).
  \end{description}
\end{definition}\fxfatal{find fitting reference for parity condition} 
We categorize word automata by their acceptance condition and if they are
deterministic. Thus, we call a word automaton $\mathcal{A}$ equipped with a
Büchi condition a \ac{NBA} or respectively \ac{DBA} if
$\mathcal{A}$ is deterministic. And analogously we obtain word automata for
Muller, Rabin, Streett and Parity conditions and corresponding acronyms.
\acuse{NMA}
\acuse{DMA}
\acuse{NRA}
\acuse{DRA}
\acuse{NSA}
\acuse{DSA}
\acuse{NPA}
\acuse{DPA}
It is known that all these automata (except for \acp{DBA}) do have the same
expressiveness.
\begin{theorem}
  \cite[Proposition 5.3, Theorem 5.4, Proposition 5.6]{LangAutoLog}
  \fxfatal{find more references}
  The class of recognizable languages coincides for \acp{NBA}, \acp{NMA},
  \acp{DMA}, \acp{NRA}, \acp{DRA}, \acp{NSA}, \acp{DSA}, \acp{NPA} and
  \acp{DPA}.
\end{theorem}

\section{Probabilistic Büchi Automata}
Upon the concept of \acp{NBA} there are approaches to substitute the
non-deterministic choices by probabilities for the choices
(see \cite{RecOmeLangProbAuto,DecProblemsForProbAuto,Groesser}). In order to
properly define these automata we introduce the concept of \aclp{MDP}.
\aclp*{MDP} can be used to model a system which reacts to the actions of an
agent (often called player) probabilisticly.\fxfatal{more references missing}
More formally we use these definitions which follow \cite{RandAutoInfTrees}:
\begin{definition}[Markov Decision Process]
  A \acl*{MDP} is modelled as tuple
  $\tuple{S, A, \tuple{\tau_{a}}_{a\in A}, s_{0}}$ where $S$ is a set of states
  and $A$ a set of actions. Given an action $a\in A$ the corresponding
  transition function $\tau_{a}:S\times S\rightarrow \interval{0,1}$ satisfies
  for every $q\in S$ that $\sum_{p\in S}\tau_{a}\tuple{q,p} = 1$.
  $s_{0}$ is the initial state. Additionally we define a few helpful
  auxilliaries:
  \begin{description}
    \item [Following States] For a state $s\in S$ we call the states in which a
      \ac{MDP} can move from into for an action $a\in A$ $a$-following states:
      \begin{equation*}
        \follow_{a}(s) = \set{q\in S\mid \tau_{a}(s,q) > 0}
      \end{equation*}
    \item [Cylinder] For a finite word of states $w\in S^{*}$ we define the
      corresponding cylinder as the set of all infinite state-sequences
      that can prolong $w$: $\cyl(w) = w\cdot S^{\omega}$.
    \item [Plays] We consider all infinite sequences of states
      (i.e. $S^{\omega}$) that start in $s_{0}$ a valid play. All plays
      are gathered in $\plays = \set{
        \alpha\in S^{\omega}\mid \alpha_{0} = s_{0}} = \cyl(s_{0})$.
    \item [Strategy] We define $\varphi:S^{*}\rightarrow A$ as strategy for
      a \ac{MDP}. Such a strategy models interaction with a \ac{MDP} by
      giving a specific $a\in A$ to which the \ac{MDP} reacts by $\tau_{a}$.
  \end{description}
  \label{def:mdp}
\end{definition}
We examine the ring induced by the set of cylinders of a \ac{MDP} $\mathcal{A}$
and for a given strategy $\varphi_{\mathcal{A}}$ we obtain an induced
pre-measure for the cylinders as follows:\fxfatal{still only a pre-measure}
\begin{equation}
  \mu_{\varphi}(\cyl(w = w_{0}\dots w_{n})\cap\plays) = \begin{cases}
    \prod_{i=1}^{n-1}\tau_{\varphi(w_{0}\dots w_{i})}(w_{i}, w_{i+1})
      &\text{ if }\cyl(w)\cap\plays\neq\emptyset\\
    0 &\text{ otherwise}
  \end{cases}
\end{equation}
Additionally we can observe that for two finite words $u,v\in S^{*}$ we have
either that these words describe two independent plays, i.e. neither
$u\sqsubseteq v$ nor $v\sqsubseteq u$ (where $\sqsubseteq$ describes the prefix
relation), or that one is prefix of the other (w.l.o.g.) $u\sqsubseteq v$. In
the first case we can set the probability measure for $\cyl(v)\cup\cyl(u)$ to
the sum of both cylinders
\begin{equation}
  \mu_{\varphi}(\cyl(v)\cup\cyl(u)) = \mu_{\varphi}(\cyl(v)) 
  + \mu_{\varphi}(\cyl(u))
\end{equation}
and in the second case we have $\cyl(v)\subseteq\cyl(u)$ hence
$\cyl(u) = \cyl(u)\cup\cyl(v)$ and for this cylinder we have already defined
a measure. In this fashion we obtained a pre-measure (induced by a strategy
\fxfatal{show $\sigma$-additivity of pre-measure} $\varphi$) on the ring of
cylinders (cp. \cite[Chapter 1 and Chapter 3]{Bauer}). This pre-measure can
now be uniquely extended to a probability measure on the $\sigma$-algebra
induced by the set of cylinders \cite[Theorem 5.4]{Bauer}.

Given this definition of \acp{MDP} we can now examine \acp{PBA}. A \ac{PBA}
essentially is a \ac{NBA} where the non-determinism is solved by a probability
distribution. More formally, we define analogously to \cite{Groesser}
\begin{definition}[Probabilistic Büchi Automata]
  A \acl{PBA} $\mathcal{A}$ over a finite alphabet $\Sigma$ is defined by a
  tuple $\tuple{Q, \Sigma, \delta, s_{0}, F}$ where $Q$ is a finite state set,
  $q_{0}\in Q$ the initial state,
    $\delta:Q\times\Sigma\times Q\rightarrow \interval{0,1}$
  a transition probability function such that for all pairs $q\in Q$ and
  $\sigma\in\Sigma$ we have $\sum{p\in Q}\delta(q,\sigma,p)\in\set{0,1}$
  and $F\subseteq Q$ is the set of final states.
\end{definition}
\acp{PBA} can be interpreted as \acp{MDP} where the decisions in every state
are induced by a word $\alpha = \alpha_{1}\alpha{2}\dots\in\Sigma^{\omega}$
rather than a player. For a \ac{PBA} $\mathcal{A}$ we can easily define a
corresponding strategy $\varphi_{\alpha}:Q^{*}\rightarrow\Sigma$ for the
equivalent \ac{MDP} $\mathcal{M}_{\mathcal{A}} =
   \tuple{Q, \Sigma, \tuple{\tau_{\sigma}}_{\sigma\in\Sigma}, q_{0}}$
where $\tau_{\sigma}(q,p) = \delta(q,\sigma,p)$ as
$\varphi_{\alpha}(w) = \alpha_{\size{w}}$. This strategy yields a probability
measure $\mu_{\alpha}$ on $Q^{\omega}$ and we can define whether $\mathcal{A}$ 
accepts $\alpha$ by this measure; namely by the measure of the set
$\mathcal{F}\subseteq Q^{\omega}$ of words that satisfy the Büchi condition
given by $F_{\mathcal{A}}$. It is known that this set $\mathcal{F}$ is
measurable and we define different acceptance conditions \cite{Groesser}:
\begin{description}
  \item [Positive Acceptance] $\mu_{\alpha}(\mathcal{F}) > 0$
  \item [Almost-Sure Acceptance] $\mu_{\alpha}(\mathcal{F}) = 1$
  \item [Threshold Acceptance] $\mu_{\alpha}(\mathcal{F}) > \lambda$ for a
    fixed threshold $\lambda\in[0, 1)$
\end{description}

Examining an induced strategy $\varphi_{\alpha}$ of a word
$\alpha\in\Sigma^{\omega}$ it is noteworthy that the strategy operates
indifferently regarding the state the play is in. We use this observation to
motivate the introduction of \acp{POMDP}. A \ac{POMDP} is a \ac{MDP}
$\mathcal{M}$ with an associated equivalence relation $\sim$
\cite{RandAutoInfTrees}. The equivalence relation models a restriction of the
player to observe the state of $\mathcal{M}$. For every
$s\in S_{\mathcal{M}}$ we define
$[s]_{\sim} = \set{r\in S\mid \sim(r,s)}$ and
$S_{\mathcal{M}}/_{\sim}$ as set of all these equivalence classes. A
strategy for a \ac{POMDP} $\tuple{\mathcal{M}, \sim}$ is defined as
$\varphi:(S_{\mathcal{M}}/_{\sim})^{*}\rightarrow A_{\mathcal{M}}$.
\begin{example}
  Re-examining a \ac{PBA} $\mathcal{A}$ and the equivalent \ac{MDP}
  $\mathcal{M}$ we observed that every word $\alpha$ induces a corresponding
  strategy $\varphi_{\alpha}$. We add to $\mathcal{M}$ an equivalence relation
  $\sim = S_{\mathcal{M}} \times S_{\mathcal{M}}$, hence there is exactly
  one equivalence class. Firstly, we observe that $\varphi_{\alpha}$ is still a
  valid strategy for the resulting \ac{POMDP}
  $\mathcal{P} = \tuple{\mathcal{M}, \sim}$. Secondly, since there is
  exactly one equivalence class every strategy for $\mathcal{P}$ observes at
  any time only the length of the history, hence we can provide an equivalent
  strategy of the form $\varphi:\mathbb{N}\rightarrow \Sigma$. This in turn
  means that every strategy in $\mathcal{P}$ induces a word in $\Sigma^{\omega}$
  of the form $\varphi(0)\varphi(1)\dots$. Furthermore, the measure of one
  strategy and an associated word coincide, i.e. the language of $\mathcal{A}$
  can be understood as strategy space for $\mathcal{P}$ and vice versa. This
  illustrates an idea which is used to define emptiness games for certain
  automata (e.g. \cite[Proposition 45]{RandAutoInfTrees}).
  \label{ex:pba}
\end{example}

\section{Tree Automata}
\fxfatal{elaborate on classical tree automata}
Building upon \cite{RandAutoInfTrees} we expand on the notion of weighting
the different paths of the run. Hereby, we incorporate the concept of
\emph{alternation} by allowing to send different states on the same path
through the tree with individual weight. Thus, we capture on transition in a
probability function over states and directions of an automaton.
\begin{definition}[Generator]
  For a set of states $Q$ and a set of directions $D$ we call a probability
  function on $Q\times D$, i.e. $G: Q\times D\rightarrow [0,1]$ with
  $\sum\limits_{\substack{q\in Q\\ d\in D}}G(q,d) = 1$, a generator over $Q$
  and $D$. A finite set of generators over sets $Q$ and $D$ is called a clause
  $C = \set{G_{1},\dots,G_{n}}$.
\end{definition}
With these transitions we adapt the common concepts of tree automata by
allowing the automaton to build a run of \enquote{transitions}.
\begin{definition}[Weighted Descent Tree Automaton]
  We define a \acl{WDTA} as tuple
  $\mathcal{A} = \tuple{Q, q_{0}, D, \Sigma, \Delta, T}$ where $Q$ is a finite
  set of states, $q_{0}$ the initial state, $D$ a finite set of directions,
  $\Sigma$ is a finite Alphabet and $T\subseteq Q^{\omega}$ is a
  $\omega$-regular target of infinite words of elements in $Q$. The transitions
  in $\Delta$ are given as clauses for every state and symbol:
  $\Delta:Q\times\Sigma\rightarrow\mathcal{C}^{Q}_{D}$
  where $\mathcal{C}^{Q}_{D}$ denotes the set of all clauses over $Q$ and $D$.
  Additionally, we define the set of all used generators as
  $\mathcal{G}_{\mathcal{A}} = \bigcup\limits_{q\in Q,d\in D}\Delta(q,d)$.
\end{definition}
The semantics of a \ac{WDTA} $\mathcal{A}$ is given as a run
$r:(Q\times D)^{*}\rightarrow \mathcal{G}_{\mathcal{A}}$ on a tree
$t:D^{*}\rightarrow\Sigma$ with $r(\epsilon)\in \Delta(q_0, t(\epsilon))$ and
for every $\tuple{q_{1},d_{1}}\dots\tuple{q_{n},d_{n}}\in(Q\times D)^{*}$ we
have $r(\tuple{q_{1},d_{1}}\dots\tuple{q_{n},d_{n}})\in
  \Delta(q_{n},t(d_{1}\dots d_{n}))$. Analogously to a strategy in Definition
\ref{def:mdp} a run induces a probability measure on the set of cylinders
in $(Q\times D)^{\omega}$ by
\begin{equation}
  \mu_{r}(\cyl(\tuple{q_{1},d_{1}}\dots\tuple{q_{n},d_{n}}))
    = r(\epsilon)(q_{1},d_{1})\cdot\prod\limits_{i = 1}^{n - 1}
    r(\tuple{q_{1},d_{1}}\dots\tuple{q_{i},d_{i}})(q_{i+1},d_{i+1})
\end{equation}
Naturally, we want to define acceptance of a run in terms of its induced
measure on the set of paths that satisfy the target $T_{\mathcal{A}}$ when
projected to the state component. Thus, we show (by adapting the proof for
\cite[Proposition 6]{RandAutoInfTrees}) the measurability of that set.
\begin{lemma}[Measurability]
  The set
  \begin{equation*}
    \set{\alpha = \tuple{q_{1},d_{1}}\tuple{q_{2},d_{2}}\dots\in
    (Q\times D)^{\omega}\mid q_{0}q_{1}q_{2}\dots\in T_{\mathcal{A}}}
  \end{equation*} is measurable in the $\sigma$-algebra that is induced by the
  ring of cylinders.
\end{lemma}
\begin{proof}
  We start with the co-Büchi condition which is dual to the Büchi condition.
  Specifically, a co-Büchi condition is also defined by a set of
  states $E\subseteq Q$ which in contrast must eventually be avoided. More
  precisely, such a set $E$ defines the accepted language as
  $\set{\alpha_{0}\alpha_{1}\dots\in Q^{\omega}\mid\text{ there is } i
  \text{ such that for all } j>i \text{ holds }\alpha_{j}\notin E}$.
  By abuse of notation we write in the following
  $\tuple{q, d}\in E$ if $q\in E$. With
  \begin{equation*}
    \prolong(u) = \set{v\in (Q\times D)^{*}\mid u\sqsubseteq v}
  \end{equation*} and
  \begin{equation*}
    T = \set{\alpha_{0}\alpha_{1}\dots\in (Q\times D)^{\omega}\mid\text{ there
    is } i \text{ such that for all } j>i \text{ holds }\alpha_{j}\notin E}
  \end{equation*}
  we claim that
  \begin{equation} 
    T = \bigcup\limits_{u\in (Q\times D)^{*}}(
    \cyl(u)\setminus\bigcup\limits_{v\in\prolong(u),v\in E}\cyl(v))
    \label{eq:measureability}
  \end{equation}
  which renders $T$ measurable as countable union of measurable sets.
  For $b\in T$ we know that there is eventually no occurence of $E$
  anymore. This induces that for every finite prefix $u\sqsubseteq b$ after the
  last occurence of an element in $E$ holds
  $b\notin\bigcup\limits_{v\in\prolong(u),v\in E}\cyl(v))$ and thus $b$
  is element of the right hand side of Equation \ref{eq:measureability}. On the
  other hand if $b\notin T$ we know that for every finite prefix
  $u\sqsubseteq b$ there is a prolongation $u\sqsubseteq v\sqsubseteq b$ such
  that the last element of $v$ is in $E$, hence $b$ is for every such $u$
  removed with by the cylinder associated with $v$ since $v\in\prolong(u)$.
  This yields that $b$ is not element of the right hand side of Equation
  \ref{eq:measureability} which proves the proclaimed equality. Additionally,
  we get measureability of all Büchi conditions $F\subseteq Q$ by using its
  duality to the co-Büchi condition $Q\setminus F$ and the closure of a
  $\sigma$-algebra under complementation.

  For a parity condition we get finitely many parities as
  $\parity(Q) = \set{d_{1},\dots,d_{n}}$. We define for an arbitrary set
  $E\subseteq Q$ the set $\cob(E)$ which is the set of accepted paths if
  $E$ is interpreted as co-Büchi condition and $\bue(E)$ which is the set of
  accepted path if $E$ is interpreted as Büchi condition. We already know that
  these sets are measureable. With these auxilliaries we can define the
  accepted paths of a parity condition $\parity$ by
  \begin{equation}
    \bigcup\limits^{1\leq i\leq n}_{d_{i}\text{ even}}\tuple{\bue(\parity^{-1}(d_{i}))
    \bigcap\bigcup\limits^{1\leq j\leq n}_{d_{j} > d_{i}, d_{j}\text{ odd}}
    \cob(\parity^{-1}(d_{j}))}
  \end{equation}
  which yields measureability of the accepted paths of a parity condition.
  Analogously, for a Muller condition $\mathcal{F} = \set{F_{1},\dots,F_{n}}$
  we can define
  \begin{equation}
    \bigcup\limits_{1\leq i\leq n}
    \tuple{\bue(F_{i})\bigcap\cob(Q\setminus F_{i})}
  \end{equation}
  Since Streett and Rabin conditions can be expressed as Muller conditions
  (see \cite[Proposition 5.3]{LangAutoLog}) this implies measurability for
  these conditions as well.
\end{proof}
In the following we often focus on parity conditions and motivate this by the
observation that parity conditions can be used to express all other conditions
(as suggested but not proven in \cite[page 24:9]{RandAutoInfTrees}).
\begin{lemma}
  For every \ac{WDTA} $\mathcal{A}$ with a Büchi, Streett, Rabin or Muller
  acceptance condition we can construct an equivalent \ac{WDTA} $\mathcal{B}$
  with a parity condition.
\end{lemma}
\begin{proof}
  Firstly, we observe that Büchi, Streett and Rabin conditions can be expressed
  as Muller conditions \cite[Proposition 5.3]{LangAutoLog}. Secondly, we
  construct for a \ac{WDTA} $\mathcal{A} = \tuple{Q, q_{0}, D, \Sigma, \Delta,
  \mathcal{F} = \set{F_{1},\dots,F_{n}}}$ with a Muller condition $\mathcal{F}$
  an equivalent \ac{WDTA} $\mathcal{B}$ with a parity condition via the use of
  a \ac{LAR}. \fxfatal{actually prove this and find fitting reference}
  Using a \ac{LAR} increases the state space but preserves the structure,
  especially the weighting, of a run and thus yields the same measure of the
  set of accepted paths.
\end{proof}
We say that $\mathcal{A}$ accepts $t$ if an accepting run exists where the
notion of an accepting run is (analogously to \acp{PBA}) tied to an
\enquote{acceptable measure} such as a Positive Acceptance or an Almost-Sure
Acceptance. It is remarkable that these measures of the accepted sets solely
depend on the occured states rather than the direction throughout the run-tree.
This motivates the following definition of an auxillary measure.
\begin{definition}[State measure]
  On the $\sigma$-algebra that is induced by the ring of cylinders in
  $Q^{\omega}$ a run $r$ of $\mathcal{A}$ induces a measure $\lambda$.
  This measure $\lambda$ is defined as the unique extension of the pre-measure
  induced by cylinders of finite words $w = w_{1}\dots w_{n}\in Q^{*}$
  \begin{equation*}
    \lambda_{r}(\cyl(w)) = \sum\limits_{d_{1}\dots d_{n}\in D^{n}}\mu_{r}(
      \cyl(\tuple{w_{1}, d_{1}}\dots\tuple{w_{n},d_{n}}))
  \end{equation*}
\end{definition}
The acceptance of a run can be defined in terms of state measures.
\begin{lemma}[State measure acceptance]
  For a run $r$ of \ac{WDTA} $\mathcal{A}$ on $t$ holds
  \begin{equation*}
    \lambda_{r}(T_{\mathcal{A}}) = \mu_{r}(\set{\tuple{q_{1},d_{1}}
    \tuple{q_{2},d_{2}}\dots\in\tuple{Q\times D}^{\omega}\mid q_{1}q_{2}\dots\in T})
  \end{equation*}
\end{lemma}
\begin{proof}
  By definition holds for all elements of the generating set, i.e. the set of
  cylinders, the equality
  \begin{align*}
    \lambda_{r}(\cyl(w)) &= \sum\limits_{d_{1}\dots d_{n}\in D^{n}}\mu_{r}(
      \cyl(\tuple{w_{1}, d_{1}}\dots\tuple{w_{n},d_{n}}))\\
      &= \mu_{r}\tuple{\bigcup\limits_{d_{1}\dots d_{n}\in D^{n}}
      \cyl(\tuple{w_{1}, d_{1}}\dots\tuple{w_{n},d_{n}})}
  \end{align*}
  which induces the claim, since the measures of measurable sets are obtained
  by the calculation rules of a measure on these generating sets.
  \fxwarning{we maybe should elaborate here more}
\end{proof}
This allows to define acceptance in terms of state measures.
\begin{corollary}
  A run $r$ of $\mathcal{A}$ on $t$ is 
  \begin{description}
    \item[Positively Accepting] iff $\lambda_{r}(T_{\mathcal{A}}) > 0$
    \item[Almost-Surely Accepting] iff $\lambda_{r}(T_{\mathcal{A}}) = 1$
  \end{description}
\end{corollary}

Additionally, we define certain structural properties on \acp{WDTA}
\begin{definition}[Structural Properties]
  A \ac{WDTA} $\mathcal{A}$ is called
  \begin{description}
    \item [deterministic] if there is at most one generator in each clause, i.e.
      for every pair $q\in Q, \sigma\in\Sigma$ holds
      $\size{\Delta(q, \sigma)} \leq 1$.
    \item [uni-directional] if for every clause there is at most one state send
      to every direction, i.e. for every $G\in\mathcal{G}_{\mathcal{A}}$
      there is at most one $q\in Q$ such that $G(q, d) > 0$ for all
      $d\in D$. Intuitively this means that the automaton explores every path
      with at most one state.
    \item [uniformly distributed (u.d.)] if $\mathcal{A}$ is uni-directional
      and for a direction $d\in D$ every clause agrees on the weight that is
      sent down that direction. Thus, for all $d\in D$ holds that for all
      $G_{1}, G_{2}\in\mathcal{G}_{\mathcal{A}}$ we have
      $G_{1}(q, d) = G_{2}(p, d)$ for the unique $q, p$ for which
      $G_{1}(q, d) > 0$, respectively $G_{2}(p, d) > 0$ or
      $G_{1}(q, d) = G_{2}(p, d) = 0$ for all $q, p$. Thus, we can fix a
      probability distribution $B:D\rightarrow \interval{0,1}$ such that for
      every $G\in\mathcal{G}_{\mathcal{A}}$ there is one $q\in Q$ with
      $B(d) = G(q, d)$. We call this distribution $B$ the \emph{blueprint} of
      $\mathcal{A}$. 
  \end{description}
\end{definition}
The examined tree automata in \cite{RandAutoInfTrees} are captured by
uniformly distributed \acp{WDTA} over the directions $D = \set{0,1}$ with
blueprint $B(0) = B(1) = \frac{1}{2}$.

\subsection{Closure Properties}
In the following we want to explore the closure properties of the introduced
\acp{WDTA} regarding union, intersection and negation. Unsuprisingly, the
non-determinism of the model induces closure under union for certain classes in
a straightforward manner (as suggested by \cite{RandAutoInfTrees}). We
generally only examine these properties for automata over the same set of
directions and the same alphabet.
\begin{proposition}[Union - uni-directional, unrestricted]
  Uni-directional and unrestricted \acp{WDTA} are closed under union.
  \label{prop:uniunrunion}
\end{proposition}
\begin{proof}
  For two automata
  $\mathcal{A}_{1} = \tuple{Q, q_{0}, D, \Sigma, \Delta_{1}, T_{1}}$ and
  $\mathcal{A}_{2} = \tuple{P, p_{0}, D, \Sigma, \Delta_{2}, T_{2}}$ we can
  w.l.o.g. assume that $Q\cap P = \emptyset$. The union \ac{WDTA} guesses in
  the very first transition which of the automata is checked for the tree:
  \begin{equation*}
    \tuple{Q\cup P\cup\set{z}, z, D, \Sigma,
    \Delta_{1}\cup\Delta_{2}\cup\set{
      \tuple{z,\sigma}\mapsto C_{\sigma}}_{\sigma\in\Sigma}, T_{1}\cup T_{2}}
  \end{equation*}
  where $z$ is a new state and
  $C_{\sigma} = \Delta_{1}(q_{0},\sigma)\cup\Delta_{2}(p_{0}, \sigma)$. Thus,
  in $z$ the decision if a generator from $\mathcal{A}_{1}$ or
  $\mathcal{A}_{2}$ is chosen determines for which automata the run is
  generated. It is noteworthy that every run is in bijection to a run of
  $\mathcal{A}_{1}$ or $\mathcal{A}_{2}$ and thus induces the same measurement
  on the set of accepted paths and that this construction preservers
  uni-directionality.
\end{proof}
\begin{corollary}
  The class of u.d. \acp{WDTA} with a fixed blueprint $B$ is closed under
  union.
\end{corollary}
\begin{proof}
  The construction for Proposition \ref{prop:uniunrunion} respects a common
  blueprint of $\mathcal{A}_{1}$ and $\mathcal{A}_{2}$.
\end{proof}
\fxwarning{what about u.d. with different blueprints? more general question:
how are non-determinism and weighting related? orthogonal or dependent?}
\fxfatal{intersection?! naive approach does not work, what about more elaborate
thoughts?}

\section{Emptiness}
Similarly to \acp{PBA}, we want to define for a given \ac{WDTA} $\mathcal{A}$
a game that captures the behaviour of $\mathcal{A}$. Again, this will result in
the definition of \ac{POMDP}.
\begin{definition}[Emptiness Game]
  For a \ac{WDTA} $\mathcal{A} = \tuple{Q, q_{0}, D, \Sigma, \Delta, T}$ we
  define an arena of the form 
  \begin{equation*}
    \tuple{\tuple{Q\times D}\cup\tuple{Q\times\Sigma}\cup\set{q_{0},\bot},
    \mathcal{G}_{\mathcal{A}}\cup\Sigma,
    \tuple{\tau_{G}}_{G\in\mathcal{G}_{\mathcal{A}}}, q_{0}}
  \end{equation*}
  where the game goes as follows:
  \begin{enumerate}
    \item initially, the player chooses any $G\in\mathcal{G}_{\mathcal{A}}$
      such that $G\in\Delta(q_{0},\sigma)$ for any $\sigma\in\Sigma$
    \item then the game moves to any $\tuple{q,d}\in\tuple{Q\times D}$ with
      probability $G(q,d)$
    \item the player may choose any $\sigma\in\Sigma$
    \item the game moves with probability $1$ to the corresponding
      $\tuple{q,\sigma}$
    \item the player may choose a transition $G\in\Delta(q,\sigma)$
    \item the game proceeds to any $\tuple{q,d}$ with the corresponding
      probability from $G$
  \end{enumerate}
  Furthermore we enforce the restricted decisions of the player in step 1, 3
  and 5 by moving the game deterministically, i.e. with probability 1, to
  $\bot$ where every decision moves deterministically to $\bot$ trapping the
  player there. Additionally, we ensure that the decisions of the player which
  element of $\Sigma$ to place at any time does not depend on the state but
  only on the history of observed directions. Therefore we introduce an
  equivalence relation $\sim$ such that $\tuple{q,d}\sim\tuple{p,d'}$ for
  $q,p\in Q$ and $d,d'\in D$ iff $d = d'$.
\end{definition}
This definition allows for the actions of a player to be only dependent of the
observations. Thus, for a strategy $\varphi$ we can obtain a corresponding tree
by following the directions of the history and placing the element
$\sigma\in\Sigma$ that the player chooses for his action in step 3.
\fxfatal{proceed with formal definition and proving the viability}
